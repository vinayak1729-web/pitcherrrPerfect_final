<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baseball Signup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Bungee&display=swap" rel="stylesheet">
    <style>
        .baseball-stitches {
            background-image: linear-gradient(to right, transparent 50%, #ff1414 50%),
                            linear-gradient(to right, transparent 50%, #ff1414 50%);
            background-size: 20px 4px;
            background-position: 0 0, 0 100%;
            background-repeat: repeat-x;
        }
    </style>
</head>

<body class="bg-[#E5F6FF] min-h-screen flex items-center justify-center" style="font-family: 'Bungee', cursive;">
    <div class="w-full max-w-md p-3 bg-white border-black border-4 shadow-[8px_8px_0px_rgba(0,0,0,1)] baseball-stitches">
        <!-- Logo Container -->
        <div class="flex justify-center mb-6">
            <div class="w-full h-24 border-2 border-black rounded-lg flex items-center justify-center bg-white px-4">
                <img 
                    src="{{ url_for('static', filename='images/logo.png') }}" 
                    alt="Logo"
                    class="max-w-full max-h-full object-contain"
                >
            </div>
        </div>
        
        <h2 class="text-3xl text-center mb-8 text-[#1B3B6F]">JOIN THE TEAM!</h2>

        <form id="signupForm" class="space-y-6">
            <!-- Username -->
            <div>
                <label for="username" class="block text-sm text-[#1B3B6F] mb-2">PLAYER NAME</label>
                <input type="text" 
                    id="username" 
                    name="username" 
                    class="w-full border-black border-2 p-3 focus:outline-none focus:shadow-[2px_2px_0px_rgba(0,0,0,1)] focus:bg-[#FFE5E5] active:shadow-[2px_2px_0px_rgba(0,0,0,1)] rounded-lg"
                    required 
                    placeholder="Your Player Name">
            </div>

            <!-- Email -->
            <div>
                <label for="email" class="block text-sm text-[#1B3B6F] mb-2">DUGOUT EMAIL</label>
                <input type="email" 
                    id="email" 
                    name="email" 
                    class="w-full border-black border-2 p-3 focus:outline-none focus:shadow-[2px_2px_0px_rgba(0,0,0,1)] focus:bg-[#E5F3FF] active:shadow-[2px_2px_0px_rgba(0,0,0,1)] rounded-lg"
                    required 
                    placeholder="your@email.com">
            </div>

            <!-- Password -->
            <div>
                <label for="password" class="block text-sm text-[#1B3B6F] mb-2">SECRET SIGNAL</label>
                <input type="password" 
                    id="password" 
                    name="password" 
                    class="w-full border-black border-2 p-3 focus:outline-none focus:shadow-[2px_2px_0px_rgba(0,0,0,1)] focus:bg-[#E5FFE5] active:shadow-[2px_2px_0px_rgba(0,0,0,1)] rounded-lg"
                    required 
                    placeholder="Your Secret Signal">
            </div>

            <!-- Confirm Password -->
            <div>
                <label for="confirm_password" class="block text-sm text-[#1B3B6F] mb-2">CONFIRM SIGNAL</label>
                <input type="password" 
                    id="confirm_password" 
                    name="confirm_password" 
                    class="w-full border-black border-2 p-3 focus:outline-none focus:shadow-[2px_2px_0px_rgba(0,0,0,1)] focus:bg-[#E5FFE5] active:shadow-[2px_2px_0px_rgba(0,0,0,1)] rounded-lg"
                    required 
                    placeholder="Confirm Your Signal">
            </div>

            <!-- Submit Button -->
            <button type="submit" 
                class="w-full py-4 px-6 bg-[#ff1414] border-black border-2 text-white hover:bg-[#d10000] hover:shadow-[4px_4px_0px_rgba(0,0,0,1)] active:bg-[#b00000] transition-all rounded-lg transform hover:-translate-y-1">
                PLAY BALL! ðŸŽ¯
            </button>
        </form>

        <div class="mt-6 text-center text-sm text-[#1B3B6F]">
            Already on the roster? <a href="/login" class="text-[#ff1414] hover:underline">Sign In</a>
        </div>
    </div>


    <script>
        document.getElementById('signupForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const formData = new FormData(e.target);

            if (formData.get('password') !== formData.get('confirm_password')) {
                alert("Passwords don't match!");
                return;
            }

            try {
                const response = await fetch('/signup', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: formData.get('username'),
                        email: formData.get('email'),
                        password: formData.get('password')
                    })
                });

                const data = await response.json();
                if (data.success) {
                    window.location.href = data.redirect; // Redirect to the questionnaire page
                } else {
                    alert(data.error || 'Signup failed');
                }
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred during signup');
            }
        });
    </script>
</body>

</html>
